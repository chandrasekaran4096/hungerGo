USE SQLTraining;
GO
CREATE SCHEMA food
GO

/*
CREATED BY: CHANDRASEKARAN P
CREATED DATE: 14-10-2025 
INFO: To Created users table
*/

IF NOT EXISTS(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'M_S_USERS'   AND TABLE_SCHEMA='food')
BEGIN
CREATE TABLE food.M_S_USERS (
    userid INT IDENTITY(1,1) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    password VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    phonenumber VARCHAR(15) NULL,
    address VARCHAR(250)  NULL,
    role VARCHAR(50) NOT NULL,
	lastlogindate DATETIME NULL,
    created_at DATETIME DEFAULT GETDATE() NOT NULL,
	updated_at DATETIME NULL,
	is_deleted BIT DEFAULT 0 NULL
);
END
GO

/*
CREATED BY: CHANDRASEKARAN P
CREATED DATE: 14-10-2025 
INFO: To Created restaurant table
*/

IF NOT EXISTS(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'M_D_RESTAURANT'   AND TABLE_SCHEMA='food')
BEGIN
CREATE TABLE food.M_D_RESTAURANT (
  restaurant_id INT IDENTITY(1,1) PRIMARY KEY,
  userid INT NOT NULL,
  name VARCHAR(100) NOT NULL,
  address VARCHAR(250)  NULL,
  phone_number VARCHAR(15) NULL,
  cuisine_type VARCHAR(100) NULL,
  delivery_time INT NULL,
  rating DECIMAL(3,2) NULL,
  is_active BIT DEFAULT 1 NULL,
  approval_status_from_admin BIT DEFAULT 0,
  img VARBINARY(MAX) NULL,
  created_at DATETIME DEFAULT GETDATE() NOT NULL,
  updated_at DATETIME NULL,
  is_deleted BIT DEFAULT 0 NULL
);
END
GO


/*
CREATED BY: CHANDRASEKARAN P
CREATED DATE: 14-10-2025 
INFO: To Created menu table
*/

IF NOT EXISTS(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'M_D_MENU'   AND TABLE_SCHEMA='food')
BEGIN
CREATE TABLE food.M_D_MENU (
  menu_id INT IDENTITY(1,1) PRIMARY KEY,
  restaurant_id INT NOT NULL, 
  item_name VARCHAR(100) NOT NULL,
  description VARCHAR(300) NULL,
  category varchar(50) NULL,
  price DECIMAL(10,2) NOT NULL,
  is_available BIT DEFAULT 1 NULL,
  ratings DECIMAL(3,2) NULL,
  img VARBINARY(MAX) NULL,
  created_at DATETIME DEFAULT GETDATE() NOT NULL,
  updated_at DATETIME NULL,
  is_deleted BIT DEFAULT 0 NULL
);
END
GO

/*
CREATED BY: CHANDRASEKARAN P
CREATED DATE: 14-10-2025 
INFO: To Created food_order table
*/

IF NOT EXISTS(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'M_D_ORDERS'   AND TABLE_SCHEMA='food')
BEGIN
CREATE TABLE food.M_D_ORDERS (
  order_id INT IDENTITY(1,1) PRIMARY KEY,
  restaurant_id INT NOT NULL,
  userid INT NOT NULL,
  order_date DATETIME NULL,
  total_amount DECIMAL(10,2) NULL,
  status VARCHAR(50) NULL,
  payment_mode VARCHAR(50) NULL,
  created_at DATETIME DEFAULT GETDATE() NOT NULL,
  updated_at DATETIME NULL,
  is_deleted BIT DEFAULT 0 NULL
);
END
GO


/*
CREATED BY: CHANDRASEKARAN P
CREATED DATE: 14-10-2025 
INFO: To Created order_item table
*/

IF NOT EXISTS(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'M_D_ORDER_ITEM'   AND TABLE_SCHEMA='food')
BEGIN
CREATE TABLE food.M_D_ORDER_ITEM (
  order_item_id INT IDENTITY(1,1) PRIMARY KEY,
  order_id INT NOT NULL,
  menu_id INT NOT NULL,
  quantity INT NOT NULL,
  total_amount DECIMAL(10,2) NULL,
  created_at DATETIME DEFAULT GETDATE() NOT NULL,
  updated_at DATETIME NULL,
  is_deleted BIT DEFAULT 0 NULL
);
END
GO

/*
CREATED BY: CHANDRASEKARAN P
CREATED DATE: 14-10-2025 
INFO: To Created cart table
*/

IF NOT EXISTS(SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'M_D_CART'   AND TABLE_SCHEMA='food')
BEGIN
CREATE TABLE food.M_D_CART (
  cart_id INT IDENTITY(1,1) PRIMARY KEY,
  userid INT NOT NULL,
  menu_id INT NOT NULL,
  quantity INT DEFAULT 1 NOT NULL,
  created_at DATETIME DEFAULT GETDATE() NOT NULL,
  updated_at DATETIME NULL,
  is_deleted BIT DEFAULT 0 NULL
);
END
GO
